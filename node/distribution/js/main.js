"use strict";function _readOnlyError(e){throw new Error('"'+e+'" is read-only')}$(function(){var a=$("#user"),n=$("#Nome"),t=$("#Cognome"),o=$("#Oggetto"),r=$("#Messaggio"),l=0;function i(e){e.forEach(function(e){e.remove()})}function s(e,a,n){var t=$("<div>");t.addClass("message");var o=$("<p>");o.html(e);var r=$("<p>");r.html(n);var l=$("<p>");l.html(a),t.append(o),t.append(l),t.append(r),$("form input:not(.button) , form textarea").each(function(e){$("form input ,form textarea").eq(e).val("")}),$(".allMessage").prepend(t)}function u(e){return!!e}$("#user").val(""),setInterval(function(){$.ajax("http://172.16.15.200:3000/pull").done(function(e){console.log(e.messages),e.messages.forEach(function(e){s(e.name,e.subject,e.message)})})},1e3),$("#Invia").on("click",function(e){if(e.preventDefault(),i([$("form p")]),!a.val()){if(u(n.val())&&3<=n.val().length)l++;else{n.after("<p>Inserisci un nome che abbia una lunghezza maggiore di 3 caratteri")}if(u(t.val())&&3<=t.val().length)l++;else{t.after("<p>Inserisci un cognome che abbia una lunghezza maggiore di 3 caratteri")}}if(u(r.val())&&1<=r.val().length)l++;else{r.after("<p>Inserisci un messaggio che abbia una lunghezza maggiore di 1 caratteri")}if(u(o.val())&&5<=o.val().length||!u(o.val()))(3==l||a.val()&&1==l)&&(a.val()||(a.val(n.val()+" "+t.val()),i([n,t,$("label[for=Nome]"),$("label[for=Cognome]")])),function(){null==o&&(_readOnlyError("subject"),o=" ");var e={id:7,name:n+t,subject:o,message:r};$.ajax({url:"http://172.16.15.200:3000/push",dataType:"json",data:{message:encodeURIComponent(JSON.stringify(e))},statusCode:{200:function(){console.log("Message is pushed")}}})}(),s(a.val(),o.val(),r.val())),l=0;else if(o.val().length<5){o.after("<p>Inserisci un oggetto che abbia una lunghezza maggiore di 5 caratteri.")}3<l&&(l=0)})});